language: scala
scala: 2.11.12
jdk: openjdk8
jobs:
  include:
  - if: tag IS present
  exclude:
  - if: tag IS blank
services:
  - docker
before_install:
  - echo "$BINTRAY_SNOWPLOW_GENERIC_API_KEY" | docker login -u "$BINTRAY_SNOWPLOW_GENERIC_USER" --password-stdin snowplow-docker-registry.bintray.io
  - git clone https://github.com/snowplow/snowplow.git && cd snowplow/2-collectors/scala-stream-collector/ && sbt publishLocal && cd ../../..
deploy:
  on:
    tags: true
  skip_cleanup: true
  provider: script
  script: bash ./.travis/deploy.sh