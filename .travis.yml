language: scala
scala: 2.11.12
jdk: openjdk8
jobs:
  include:
  - if: tag IS present
  exclude:
  - if: tag IS blank
services:
  - docker
before_install:
  - docker login -u $BINTRAY_SNOWPLOW_GENERIC_USER -p $BINTRAY_SNOWPLOW_GENERIC_API_KEY snowplow-docker-registry.bintray.io
  - git clone https://github.com/snowplow/snowplow.git && cd snowplow/2-collectors/scala-stream-collector/ && sbt publishLocal && cd ../../..
deploy:
  on:
    tags: true
  skip_cleanup: true
  provider: script
  script: bash ./.travis/deploy.sh
env:
  global:
  # BINTRAY_SNOWPLOW_GENERIC_USER
  - secure: "LTZN+1RZGI6JTE07x69nNCH5PwXvcIsdUquDfPF0IGwqjgvxLS70fW6umBUw35hrivMxMkJdoWUVGtmzf7UxnhwyVh/94drQV99hHgNXStDRFWEZlA+lwRSNbrk+DqOB7j/2VYUkrX2Y+PMp0IdxkUmYZqHJhslX9jdjecoIp8y3JUXjfaSyolxU+2XIb0xahHCCaMSyRr/rQGj9veX/IVhqcv9rFBodR3oEaXJ3V0wxU8kO+Olfm/KzpqgX8OWK2wELvIcYCZ24D+JXso7h08ZuW6Po6nzr0ItPp4O6Glu1hZGnp9vO+aIKtjLX9qM8U728IsnVZW8CDnp5OZLICUk9LpA7diflqCuPANXorCgy/jOwBv3HbBTkAX4P/7qxFD9xBAtgB+fL9wW4PymqMgrglk4wwE1VlT6Tnbfhi1lr5oHWC0XUa3u8DGAL1mykeIPcbJ1+MNfvt2K8QruqUGao/bwHzUsu6lCYfxe4vGYQhbuW3Ro3B/NzGbspf4UmDQYv6ezljqfWcU5hwoDYnYiA99HEfDUNB3MNK4FzLVFpGpyoY+zGED0AZrHjsz+u0WO2w8HVnXkzKbFecDol7i+bSlReQUCDNcjE+pnPovbED1uylXe7fVpnCh+Yg6yLrsraS9uRSr0aOETByW7+ZtoaiTkUC/oOnVLoZvljbpc="
  # BINTRAY_SNOWPLOW_GENERIC_API_KEY
  - secure: "oRp0oh1XDKB7/bA6L0Eu8S3VM/4CWEru17+glEZB+ZiI2ZsTuCoICv3qLFK4MdKwZnAYyW+p0NStfTqxBv/6vxgECjWOt+1b9tOSMTmZcrMg8nLhimH0kdl6hKxQvHyiPUXdQi339EBBjL/IO6s0lUMai7ibhFrOCpnEEuRaKywQpm7rnFQiT7f9LEwFEWQDhqSGVGkEN5f6uvlWtyr/28bG3RWchzCfr7Y20dFaSyGv/C73eCTu4y2n6BcVa881TyHjjHI9gvFH1cilMSVqfDpDqkbx9gjav0LNGVdkfks++7vFG6ImgwZCLIXwQkg5qBpBCcggYNx35NhXUhdST/PF2nNxdlbMI2WGdcKeYMUg3rBIqI+DTdaTmCGYvhDQJzyu95u3DDAkgDsDRttAmrzUhNSZX+99AX0LyQYopZMl3KBPwWDSKsZTXMhM7tuIaSC+hKS1kGcKW2TOBhg1ul7S0dzoHE/sbNYK2AIgo6qTinLHzSWKHMnXDl93V6iQM/0v+kvvObUHr74ezosDX7sSq7k1HvTkbPH7zys8GiHTlToI+4FranZk+lON2tpt0kgT+FI1tp5P1ESsxPonWf5FIfQHDrF6/NcoIdNnbhMbKla9VVXgc5r0bmOLfsYajgJHTnCdAxIvZSE/Ee8+zd7Uk3o3fxnf7YnjsL03GeA="